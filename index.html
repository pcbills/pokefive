<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pokefive</title>
<style>
/* Reset and base styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  --color-correct: #6aaa64;
  --color-present: #c9b458;
  --color-absent: #787c7e;
  --color-background: #ffffff;
  --color-border: #d3d6da;
  --font-family: 'Clear Sans', 'Helvetica Neue', Arial, sans-serif;
}

body {
  font-family: var(--font-family);
  background-color: var(--color-background);
  min-height: 100vh;
  padding: 10px;
}

/* Header styles */
.game-header {
  text-align: center;
  padding: 5px 0;
  margin-bottom: 10px;
  border-bottom: 1px solid var(--color-border);
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}

.game-title {
  font-size: 28px;
  font-weight: 700;
  margin: 0;
  color: #1a1a1b;
}

#help-button {
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  padding: 0.5rem;
  border-radius: 9999px;
  background: white;
  border: none;
  cursor: pointer;
  z-index: 50;
  transition: background-color 0.2s;
}

#help-button:hover {
  background-color: rgba(0, 0, 0, 0.1);
}

/* Game container */
.game-container {
  max-width: 800px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

/* Pokemon display section */
.pokemon-container {
  display: flex;
  justify-content: space-between;
  width: 100%;
  gap: 10px;
  flex-wrap: wrap;
}

.pokemon-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: calc(20% - 8px);
  margin-bottom: 10px;
}

.pokemon-image {
  width: 120px;
  height: 120px;
  object-fit: contain;
  border-radius: 8px;
  border: 2px solid var(--color-border);
  margin-bottom: 8px;
}

.pokemon-inputs {
  display: flex;
  flex-direction: column;
  width: 100%;
  gap: 5px;
}

.input-box {
  height: 36px;
  border: 2px solid var(--color-border);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  cursor: pointer;
  background-color: white;
  padding: 0 5px;
  text-align: center;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  font-size: 0.85rem;
}

.input-box.active {
  border-color: var(--color-correct);
  box-shadow: 0 0 5px rgba(106, 170, 100, 0.5);
}

.input-box.filled {
  background-color: #f0f0f0;
}

.input-box.correct {
  background-color: var(--color-correct);
  color: white;
  border-color: var(--color-correct);
}

/* Trait bank section */
.trait-bank {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  width: 100%;
  margin-top: 10px;
}

.trait-item {
  padding: 10px 15px;
  background-color: var(--color-border);
  border-radius: 4px;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.2s;
  font-size: 0.9rem;
}

.trait-item:hover {
  background-color: #c0c4c9;
}

/* Control buttons */
.control-buttons {
  display: flex;
  gap: 8px;
  margin-top: 20px;
  flex-wrap: wrap;
  justify-content: center;
}

.control-button {
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  background-color: var(--color-correct);
  color: white;
  font-family: var(--font-family);
  font-size: 0.9rem;
  font-weight: bold;
  cursor: pointer;
  text-transform: uppercase;
}

.control-button:hover {
  filter: brightness(1.1);
}

/* Win message */
#win-message {
  position: fixed;
  top: 35%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: rgba(255, 255, 255, 0.95);
  padding: 20px 40px;
  border-radius: 8px;
  box-shadow: 0 4px 23px 0 rgba(0, 0, 0, 0.2), 0 0 20px rgba(106, 170, 100, 0.6);
  font-size: 32px;
  font-weight: bold;
  color: var(--color-correct);
  z-index: 1000;
  text-align: center;
  animation: celebrate 0.6s ease-in-out;
}

@keyframes celebrate {
  0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
  50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

/* Help modal */
#help-modal {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 100;
  display: none;
}

#help-modal.hidden {
  display: none;
}

#help-modal:not(.hidden) {
  display: block;
}

.bg-white {
  background: white;
  border-radius: 0.5rem;
  padding: 1.5rem;
  max-width: 28rem;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  margin: auto;
  position: relative;
  top: 50%;
  transform: translateY(-50%);
}

.space-y-4 > * + * {
  margin-top: 1rem;
}

.list-disc {
  list-style-type: disc;
  padding-left: 1.25rem;
}

.list-decimal {
  list-style-type: decimal;
  padding-left: 1.25rem;
}

/* Toast notification */
.toast {
  position: fixed;
  bottom: 65%;
  left: 50%;
  transform: translateX(-50%);
  background-color: #333;
  color: white;
  padding: 12px 24px;
  border-radius: 4px;
  font-size: 0.9rem;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1000;
}

.toast.show {
  opacity: 1;
}

/* Trophy icon */
.trophy {
  display: block;
  font-size: 48px;
  margin-bottom: 15px;
  color: gold;
}

/* Responsive design */
@media (max-width: 768px) {
  .pokemon-container {
    justify-content: center;
  }

  .pokemon-item {
    width: calc(33.33% - 10px);
  }
}

@media (max-width: 600px) {
  .pokemon-item {
    width: calc(50% - 10px);
  }

  .pokemon-image {
    width: 100px;
    height: 100px;
  }

  .trait-item {
    padding: 8px 12px;
    font-size: 0.8rem;
  }

  .control-button {
    padding: 8px 12px;
    font-size: 0.7rem;
  }
}
.other-games-button {
  background-color: #9C27B0;
  text-decoration: none;
  display: inline-block;
}

.other-games-button:hover {
  filter: brightness(1.1);
}
</style>
</head>
<body>
<div class="game-header">
<h1 class="game-title">Pokefive</h1>
<button id="help-button">?</button>
</div>

<div class="game-container">
<div class="pokemon-container" id="pokemon-container">
  <!-- Pokemon images and input boxes will be inserted here -->
</div>

<div id="question-text" class="question-text">
  What do these 5 Pokémon have in common?
</div>

<div class="trait-bank" id="trait-bank">
  <!-- Trait buttons will be inserted here -->
</div>

<div class="control-buttons">
  <button id="new-game-button" class="control-button">New Game</button>
  <button id="show-answer-button" class="control-button">Show Answer</button>
  <a href="https://playfivegames.com" class="control-button other-games-button">Play other fivegames!</a>
</div>
</div>

<div id="help-modal" class="hidden">
<div class="bg-white">
  <h2 style="font-size: 1.25rem; font-weight: bold; margin-bottom: 1rem;">How to Play Pokefive</h2>
  <div class="space-y-4">
    <p>
      Pokefive is a Pokémon trait matching game where you need to identify what trait five Pokémon have in common.
    </p>
    <br>
    <p>
      Each set of five Pokémon shares one specific trait. Your task is to identify which trait they all have in common.
    </p>

    <div>
      <h3 style="font-weight: bold; margin-bottom: 0.5rem;">How to Play:</h3>
      <ol class="list-decimal">
        <li style="margin-top: 0.5rem;">Look at the five displayed Pokémon</li>
        <li style="margin-top: 0.5rem;">Click on the trait button you think all five Pokémon share</li>
        <li style="margin-top: 0.5rem;">If correct, you win! If not, keep trying</li>
        <li style="margin-top: 0.5rem;">Click "New Game" for a new set of Pokémon</li>
      </ol>
    </div>

    <div>
      <h3 style="font-weight: bold; margin-bottom: 0.5rem; margin-top: 1rem;">Possible Traits:</h3>
      <ul class="list-disc">
        <li style="margin-top: 0.5rem;">Main Type (Fire, Water, Grass, etc.)</li>
        <li style="margin-top: 0.5rem;">Evolution Stage (Basic, Stage 1, Stage 2)</li>
        <li style="margin-top: 0.5rem;">Generation (1-9)</li>
        <li style="margin-top: 0.5rem;">Weight Category (Featherweight to Superweight)</li>
        <li style="margin-top: 0.5rem;">Height Category (Tiny to Gigantic)</li>
      </ul>
    </div>
  </div>
</div>
</div>

<script>
// Game state
let pokemonData = [];
let selectedPokemon = [];
let selectedTrait = '';
let selectedTraitValue = '';
let gameState = 'loading'; // loading, playing, win
let answerRevealed = false;

// Define the possible traits
const traits = [
  { id: 'mainType', name: 'Main Type' },
  { id: 'evolutionStage', name: 'Evolution Stage' },
  { id: 'generation', name: 'Generation' },
  { id: 'weightCategory', name: 'Weight Category' },
  { id: 'heightCategory', name: 'Height Category' }
];

// DOM Elements
const elements = {
  pokemonContainer: document.getElementById('pokemon-container'),
  questionText: document.getElementById('question-text'),
  traitBank: document.getElementById('trait-bank'),
  newGameButton: document.getElementById('new-game-button'),
  showAnswerButton: document.getElementById('show-answer-button'),
  helpButton: document.getElementById('help-button'),
  helpModal: document.getElementById('help-modal')
};

// Initialize the game
document.addEventListener('DOMContentLoaded', () => {
  loadPokemonData();
  setupHelpModal();
});

// Load Pokemon data
function loadPokemonData() {
  try {
    // In a real implementation, you'd fetch this data from a server
    // For this demo, we'll use the embedded JSON
    const pokemonJson = {
      "pokemon": [
    {
      "name": "Bulbasaur",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 1,
      "weight": 6.9,
      "height": 0.7,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png"
    },
    {
      "name": "Charmander",
      "mainType": "Fire",
      "evolutionStage": "Basic",
      "generation": 1,
      "weight": 8.5,
      "height": 0.6,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png"
    },
    {
      "name": "Squirtle",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 1,
      "weight": 9.0,
      "height": 0.5,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png"
    },
    {
      "name": "Pikachu",
      "mainType": "Electric",
      "evolutionStage": "Basic",
      "generation": 1,
      "weight": 6.0,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png"
    },
    {
      "name": "Machamp",
      "mainType": "Fighting",
      "evolutionStage": "Stage 2",
      "generation": 1,
      "weight": 130.0,
      "height": 1.6,
      "weightCategory": "Heavyweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/68.png"
    },
    {
      "name": "Gengar",
      "mainType": "Ghost",
      "evolutionStage": "Stage 2",
      "generation": 1,
      "weight": 40.5,
      "height": 1.5,
      "weightCategory": "Middleweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/94.png"
    },
    {
      "name": "Lapras",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 1,
      "weight": 220.0,
      "height": 2.5,
      "weightCategory": "Superweight",
      "heightCategory": "Gigantic",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/131.png"
    },
    {
      "name": "Eevee",
      "mainType": "Normal",
      "evolutionStage": "Basic",
      "generation": 1,
      "weight": 6.5,
      "height": 0.3,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/133.png"
    },
    {
      "name": "Snorlax",
      "mainType": "Normal",
      "evolutionStage": "Basic",
      "generation": 1,
      "weight": 460.0,
      "height": 2.1,
      "weightCategory": "Superweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/143.png"
    },
    {
      "name": "Chikorita",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 2,
      "weight": 6.4,
      "height": 0.9,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/152.png"
    },
    {
      "name": "Cyndaquil",
      "mainType": "Fire",
      "evolutionStage": "Basic",
      "generation": 2,
      "weight": 7.9,
      "height": 0.5,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/155.png"
    },
    {
      "name": "Totodile",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 2,
      "weight": 9.5,
      "height": 0.6,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/158.png"
    },
    {
      "name": "Ampharos",
      "mainType": "Electric",
      "evolutionStage": "Stage 2",
      "generation": 2,
      "weight": 61.5,
      "height": 1.4,
      "weightCategory": "Heavyweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/181.png"
    },
    {
      "name": "Bellossom",
      "mainType": "Grass",
      "evolutionStage": "Stage 2",
      "generation": 2,
      "weight": 5.8,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/182.png"
    },
    {
      "name": "Marill",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 2,
      "weight": 8.5,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/183.png"
    },
    {
      "name": "Umbreon",
      "mainType": "Dark",
      "evolutionStage": "Stage 1",
      "generation": 2,
      "weight": 27.0,
      "height": 1.0,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/197.png"
    },
    {
      "name": "Scizor",
      "mainType": "Bug",
      "evolutionStage": "Stage 1",
      "generation": 2,
      "weight": 118.0,
      "height": 1.8,
      "weightCategory": "Heavyweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/212.png"
    },
    {
      "name": "Tyranitar",
      "mainType": "Rock",
      "evolutionStage": "Stage 2",
      "generation": 2,
      "weight": 202.0,
      "height": 2.0,
      "weightCategory": "Superweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/248.png"
    },
    {
      "name": "Treecko",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 3,
      "weight": 5.0,
      "height": 0.5,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/252.png"
    },
    {
      "name": "Combusken",
      "mainType": "Fire",
      "evolutionStage": "Stage 1",
      "generation": 3,
      "weight": 19.5,
      "height": 0.9,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/256.png"
    },
    {
      "name": "Swampert",
      "mainType": "Water",
      "evolutionStage": "Stage 2",
      "generation": 3,
      "weight": 81.9,
      "height": 1.5,
      "weightCategory": "Heavyweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/260.png"
    },
    {
      "name": "Gardevoir",
      "mainType": "Psychic",
      "evolutionStage": "Stage 2",
      "generation": 3,
      "weight": 48.4,
      "height": 1.6,
      "weightCategory": "Middleweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/282.png"
    },
    {
      "name": "Breloom",
      "mainType": "Grass",
      "evolutionStage": "Stage 1",
      "generation": 3,
      "weight": 39.2,
      "height": 1.2,
      "weightCategory": "Middleweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/286.png"
    },
    {
      "name": "Aggron",
      "mainType": "Steel",
      "evolutionStage": "Stage 2",
      "generation": 3,
      "weight": 360.0,
      "height": 2.1,
      "weightCategory": "Superweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/306.png"
    },
    {
      "name": "Wailord",
      "mainType": "Water",
      "evolutionStage": "Stage 1",
      "generation": 3,
      "weight": 398.0,
      "height": 14.5,
      "weightCategory": "Superweight",
      "heightCategory": "Gigantic",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/321.png"
    },
    {
      "name": "Flygon",
      "mainType": "Ground",
      "evolutionStage": "Stage 2",
      "generation": 3,
      "weight": 82.0,
      "height": 2.0,
      "weightCategory": "Heavyweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/330.png"
    },
    {
      "name": "Salamence",
      "mainType": "Dragon",
      "evolutionStage": "Stage 2",
      "generation": 3,
      "weight": 102.6,
      "height": 1.5,
      "weightCategory": "Heavyweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/373.png"
    },
    {
      "name": "Turtwig",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 4,
      "weight": 10.2,
      "height": 0.4,
      "weightCategory": "Lightweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/387.png"
    },
    {
      "name": "Chimchar",
      "mainType": "Fire",
      "evolutionStage": "Basic",
      "generation": 4,
      "weight": 6.2,
      "height": 0.5,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/390.png"
    },
    {
      "name": "Piplup",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 4,
      "weight": 5.2,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/393.png"
    },
    {
      "name": "Luxray",
      "mainType": "Electric",
      "evolutionStage": "Stage 2",
      "generation": 4,
      "weight": 42.0,
      "height": 1.4,
      "weightCategory": "Middleweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/405.png"
    },
    {
      "name": "Roserade",
      "mainType": "Grass",
      "evolutionStage": "Stage 2",
      "generation": 4,
      "weight": 14.5,
      "height": 0.9,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/407.png"
    },
    {
      "name": "Garchomp",
      "mainType": "Dragon",
      "evolutionStage": "Stage 2",
      "generation": 4,
      "weight": 95.0,
      "height": 1.9,
      "weightCategory": "Heavyweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/445.png"
    },
    {
      "name": "Lucario",
      "mainType": "Fighting",
      "evolutionStage": "Stage 1",
      "generation": 4,
      "weight": 54.0,
      "height": 1.2,
      "weightCategory": "Middleweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/448.png"
    },
    {
      "name": "Glaceon",
      "mainType": "Ice",
      "evolutionStage": "Stage 1",
      "generation": 4,
      "weight": 25.9,
      "height": 0.8,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/471.png"
    },
    {
      "name": "Gallade",
      "mainType": "Psychic",
      "evolutionStage": "Stage 2",
      "generation": 4,
      "weight": 52.0,
      "height": 1.6,
      "weightCategory": "Middleweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/475.png"
    },
    {
      "name": "Snivy",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 5,
      "weight": 8.1,
      "height": 0.6,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/495.png"
    },
    {
      "name": "Tepig",
      "mainType": "Fire",
      "evolutionStage": "Basic",
      "generation": 5,
      "weight": 9.9,
      "height": 0.5,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/498.png"
    },
    {
      "name": "Oshawott",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 5,
      "weight": 5.9,
      "height": 0.5,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/501.png"
    },
    {
      "name": "Excadrill",
      "mainType": "Ground",
      "evolutionStage": "Stage 1",
      "generation": 5,
      "weight": 40.4,
      "height": 0.7,
      "weightCategory": "Middleweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/530.png"
    },
    {
      "name": "Zoroark",
      "mainType": "Dark",
      "evolutionStage": "Stage 1",
      "generation": 5,
      "weight": 81.1,
      "height": 1.6,
      "weightCategory": "Heavyweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/571.png"
    },
    {
      "name": "Chandelure",
      "mainType": "Ghost",
      "evolutionStage": "Stage 2",
      "generation": 5,
      "weight": 34.3,
      "height": 1.0,
      "weightCategory": "Middleweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/609.png"
    },
    {
      "name": "Hydreigon",
      "mainType": "Dark",
      "evolutionStage": "Stage 2",
      "generation": 5,
      "weight": 160.0,
      "height": 1.8,
      "weightCategory": "Superweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/635.png"
    },
    {
      "name": "Volcarona",
      "mainType": "Bug",
      "evolutionStage": "Stage 1",
      "generation": 5,
      "weight": 46.0,
      "height": 1.6,
      "weightCategory": "Middleweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/637.png"
    },
    {
      "name": "Reshiram",
      "mainType": "Dragon",
      "evolutionStage": "Basic",
      "generation": 5,
      "weight": 330.0,
      "height": 3.2,
      "weightCategory": "Superweight",
      "heightCategory": "Gigantic",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/643.png"
    },
    {
      "name": "Chespin",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 6,
      "weight": 9.0,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/650.png"
    },
    {
      "name": "Fennekin",
      "mainType": "Fire",
      "evolutionStage": "Basic",
      "generation": 6,
      "weight": 9.4,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/653.png"
    },
    {
      "name": "Froakie",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 6,
      "weight": 7.0,
      "height": 0.3,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/656.png"
    },
    {
      "name": "Aegislash",
      "mainType": "Steel",
      "evolutionStage": "Stage 2",
      "generation": 6,
      "weight": 53.0,
      "height": 1.7,
      "weightCategory": "Middleweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/681.png"
    },
    {
      "name": "Sylveon",
      "mainType": "Fairy",
      "evolutionStage": "Stage 1",
      "generation": 6,
      "weight": 23.5,
      "height": 1.0,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/700.png"
    },
    {
      "name": "Hawlucha",
      "mainType": "Fighting",
      "evolutionStage": "Basic",
      "generation": 6,
      "weight": 21.5,
      "height": 0.8,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/701.png"
    },
    {
      "name": "Goodra",
      "mainType": "Dragon",
      "evolutionStage": "Stage 2",
      "generation": 6,
      "weight": 150.5,
      "height": 2.0,
      "weightCategory": "Superweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/706.png"
    },
    {
      "name": "Noivern",
      "mainType": "Flying",
      "evolutionStage": "Stage 1",
      "generation": 6,
      "weight": 85.0,
      "height": 1.5,
      "weightCategory": "Heavyweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/715.png"
    },
    {
      "name": "Xerneas",
      "mainType": "Fairy",
      "evolutionStage": "Basic",
      "generation": 6,
      "weight": 215.0,
      "height": 3.0,
      "weightCategory": "Superweight",
      "heightCategory": "Gigantic",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/716.png"
    },
    {
      "name": "Rowlet",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 7,
      "weight": 1.5,
      "height": 0.3,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/722.png"
    },
    {
      "name": "Litten",
      "mainType": "Fire",
      "evolutionStage": "Basic",
      "generation": 7,
      "weight": 4.3,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/725.png"
    },
    {
      "name": "Primarina",
      "mainType": "Water",
      "evolutionStage": "Stage 2",
      "generation": 7,
      "weight": 44.0,
      "height": 1.8,
      "weightCategory": "Middleweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/730.png"
    },
    {
      "name": "Lycanroc",
      "mainType": "Rock",
      "evolutionStage": "Stage 1",
      "generation": 7,
      "weight": 25.0,
      "height": 0.8,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/745.png"
    },
    {
      "name": "Toxapex",
      "mainType": "Poison",
      "evolutionStage": "Stage 1",
      "generation": 7,
      "weight": 14.5,
      "height": 0.7,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/748.png"
    },
    {
      "name": "Mimikyu",
      "mainType": "Ghost",
      "evolutionStage": "Basic",
      "generation": 7,
      "weight": 0.7,
      "height": 0.2,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/778.png"
    },
    {
      "name": "Kommo-o",
      "mainType": "Dragon",
      "evolutionStage": "Stage 2",
      "generation": 7,
      "weight": 78.2,
      "height": 1.6,
      "weightCategory": "Heavyweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/784.png"
    },
    {
      "name": "Necrozma",
      "mainType": "Psychic",
      "evolutionStage": "Basic",
      "generation": 7,
      "weight": 230.0,
      "height": 2.4,
      "weightCategory": "Superweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/800.png"
    },
    {
      "name": "Zeraora",
      "mainType": "Electric",
      "evolutionStage": "Basic",
      "generation": 7,
      "weight": 44.5,
      "height": 1.5,
      "weightCategory": "Middleweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/807.png"
    },
    {
      "name": "Grookey",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 8,
      "weight": 5.0,
      "height": 0.3,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/810.png"
    },
    {
      "name": "Scorbunny",
      "mainType": "Fire",
      "evolutionStage": "Basic",
      "generation": 8,
      "weight": 4.5,
      "height": 0.3,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/813.png"
    },
    {
      "name": "Sobble",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 8,
      "weight": 4.0,
      "height": 0.3,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/816.png"
    },
    {
      "name": "Corviknight",
      "mainType": "Flying",
      "evolutionStage": "Stage 2",
      "generation": 8,
      "weight": 75.0,
      "height": 2.2,
      "weightCategory": "Heavyweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/823.png"
    },
    {
      "name": "Toxtricity",
      "mainType": "Electric",
      "evolutionStage": "Stage 1",
      "generation": 8,
      "weight": 40.0,
      "height": 1.6,
      "weightCategory": "Middleweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/849.png"
    },
    {
      "name": "Hatterene",
      "mainType": "Psychic",
      "evolutionStage": "Stage 2",
      "generation": 8,
      "weight": 5.1,
      "height": 2.1,
      "weightCategory": "Featherweight",
      "heightCategory": "Large",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/858.png"
    },
    {
      "name": "Grimmsnarl",
      "mainType": "Dark",
      "evolutionStage": "Stage 2",
      "generation": 8,
      "weight": 61.0,
      "height": 1.5,
      "weightCategory": "Heavyweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/861.png"
    },
    {
      "name": "Dragapult",
      "mainType": "Dragon",
      "evolutionStage": "Stage 2",
      "generation": 8,
      "weight": 50.0,
      "height": 3.0,
      "weightCategory": "Middleweight",
      "heightCategory": "Gigantic",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/887.png"
    },
    {
      "name": "Zacian",
      "mainType": "Fairy",
      "evolutionStage": "Basic",
      "generation": 8,
      "weight": 110.0,
      "height": 2.8,
      "weightCategory": "Heavyweight",
      "heightCategory": "Gigantic",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/888.png"
    },
    {
      "name": "Sprigatito",
      "mainType": "Grass",
      "evolutionStage": "Basic",
      "generation": 9,
      "weight": 4.1,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/906.png"
    },
    {
      "name": "Fuecoco",
      "mainType": "Fire",
      "evolutionStage": "Basic",
      "generation": 9,
      "weight": 9.8,
      "height": 0.4,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/909.png"
    },
    {
      "name": "Quaxly",
      "mainType": "Water",
      "evolutionStage": "Basic",
      "generation": 9,
      "weight": 6.1,
      "height": 0.5,
      "weightCategory": "Featherweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/912.png"
    },
    {
      "name": "Lechonk",
      "mainType": "Normal",
      "evolutionStage": "Basic",
      "generation": 9,
      "weight": 10.2,
      "height": 0.5,
      "weightCategory": "Lightweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/915.png"
    },
    {
      "name": "Pawmi",
      "mainType": "Electric",
      "evolutionStage": "Basic",
      "generation": 9,
      "weight": 2.5,
      "height": 0.3,
      "weightCategory": "Featherweight",
      "heightCategory": "Tiny",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/921.png"
    },
    {
      "name": "Cetitan",
      "mainType": "Ice",
      "evolutionStage": "Stage 1",
      "generation": 9,
      "weight": 700.0,
      "height": 4.5,
      "weightCategory": "Superweight",
      "heightCategory": "Gigantic",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/975.png"
    },
    {
      "name": "Annihilape",
      "mainType": "Fighting",
      "evolutionStage": "Stage 2",
      "generation": 9,
      "weight": 56.0,
      "height": 1.2,
      "weightCategory": "Middleweight",
      "heightCategory": "Medium",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/979.png"
    },
    {
      "name": "Tinkaton",
      "mainType": "Fairy",
      "evolutionStage": "Stage 2",
      "generation": 9,
      "weight": 112.8,
      "height": 0.7,
      "weightCategory": "Heavyweight",
      "heightCategory": "Small",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/959.png"
    },
    {
      "name": "Miraidon",
      "mainType": "Electric",
      "evolutionStage": "Basic",
      "generation": 9,
      "weight": 240.0,
      "height": 3.5,
      "weightCategory": "Superweight",
      "heightCategory": "Gigantic",
      "iconUrl": "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1008.png"
    }
  ]
    };
    
    pokemonData = pokemonJson.pokemon;
    startNewGame();
  } catch (error) {
    console.error('Error loading Pokemon data:', error);
  }
}

// Start a new game
function startNewGame() {
  if (pokemonData.length === 0) return;
  
  answerRevealed = false;
  
  // Reset the question text
  elements.questionText.textContent = "What do these 5 Pokémon have in common?";
  elements.questionText.style.fontWeight = "bold";
  elements.questionText.style.color = "#333";
  
  // 1. Choose a random trait
  const randomTraitIndex = Math.floor(Math.random() * traits.length);
  const chosenTrait = traits[randomTraitIndex].id;
  selectedTrait = chosenTrait;
  
  // 2. Get all possible values for this trait
  const traitValues = [...new Set(pokemonData.map(p => p[chosenTrait]))];
  
  // 3. Choose a random value for the trait
  const randomValueIndex = Math.floor(Math.random() * traitValues.length);
  const chosenValue = traitValues[randomValueIndex];
  selectedTraitValue = chosenValue;
  
  // 4. Find all Pokemon with this trait value
  const matchingPokemon = pokemonData.filter(p => p[chosenTrait] === chosenValue);
  
  // 5. Choose 5 random Pokemon from the matching ones
  const selectedFive = [];
  const tempMatchingPokemon = [...matchingPokemon];
  
  // Make sure we have at least 5 matching Pokemon
  if (tempMatchingPokemon.length < 5) {
    console.error('Not enough Pokemon with this trait value:', chosenTrait, chosenValue);
    // Try again with a different trait
    startNewGame();
    return;
  }
  
  for (let i = 0; i < 5; i++) {
    const randomIndex = Math.floor(Math.random() * tempMatchingPokemon.length);
    selectedFive.push(tempMatchingPokemon[randomIndex]);
    tempMatchingPokemon.splice(randomIndex, 1);
  }
  
  selectedPokemon = selectedFive;
  gameState = 'playing';
  
  renderPokemon();
  renderTraitButtons();
}

// Render Pokemon
function renderPokemon() {
  elements.pokemonContainer.innerHTML = '';
  
  selectedPokemon.forEach((pokemon) => {
    const pokemonItem = document.createElement('div');
    pokemonItem.className = 'pokemon-item';
    
    const img = document.createElement('img');
    img.className = 'pokemon-image';
    img.src = pokemon.iconUrl;
    img.alt = pokemon.name;
    
    const nameDiv = document.createElement('div');
    nameDiv.className = 'input-box filled';
    nameDiv.textContent = pokemon.name;
    
    pokemonItem.appendChild(img);
    pokemonItem.appendChild(nameDiv);
    
    elements.pokemonContainer.appendChild(pokemonItem);
  });
}

// Render trait buttons
function renderTraitButtons() {
  elements.traitBank.innerHTML = '';
  
  traits.forEach(trait => {
    const traitButton = document.createElement('div');
    traitButton.className = 'trait-item';
    traitButton.textContent = trait.name;
    traitButton.dataset.traitId = trait.id;
    traitButton.addEventListener('click', handleTraitClick);
    
    elements.traitBank.appendChild(traitButton);
  });
}

// Handle trait click
function handleTraitClick(event) {
  const traitButton = event.currentTarget;
  const traitId = traitButton.dataset.traitId;
  
  // Check if ALL selected Pokémon share this trait value
  const firstPokemon = selectedPokemon[0];
  const selectedTraitValue = firstPokemon[traitId];
  const allShareTrait = selectedPokemon.every(pokemon => pokemon[traitId] === selectedTraitValue);
  
  if (allShareTrait) {
    gameState = 'win';
    showWinMessage();
    highlightCorrectTrait(traitId, selectedTraitValue);
  } else {
    showToast('Try again! Not all Pokémon share that trait.');
    
    if (answerRevealed) {
      highlightCorrectTrait(selectedTrait, selectedTraitValue);
    }
  }
}

// Highlight correct trait
function highlightCorrectTrait(traitId, traitValue) {
  const traitButtons = elements.traitBank.querySelectorAll('.trait-item');
  
  traitButtons.forEach(button => {
    if (button.dataset.traitId === traitId) {
      button.classList.add('correct');
      button.style.backgroundColor = 'var(--color-correct)';
      button.style.color = 'white';
    }
  });
  
  // Update the question text with the answer
  elements.questionText.innerHTML = `All these Pokémon share the ${traits.find(t => t.id === traitId).name}: <strong>${traitValue}</strong>`;
  elements.questionText.style.color = 'var(--color-correct)';
}

// Show win message
function showWinMessage() {
  // Create win message if it doesn't exist
  if (!document.getElementById('win-message')) {
    const messageDiv = document.createElement('div');
    messageDiv.id = 'win-message';
    
    const trophy = document.createElement('span');
    trophy.className = 'trophy';
    trophy.textContent = '🏆';
    messageDiv.appendChild(trophy);
    
    const text = document.createElement('div');
    text.textContent = ['Amazing!', 'Poké-tastic!', 'That\'s Pokefive!'][Math.floor(Math.random() * 3)];
    messageDiv.appendChild(text);
    
    document.body.appendChild(messageDiv);
    
    setTimeout(() => {
      messageDiv.remove();
    }, 3000);
  }
}

// Show the answer
function revealAnswer() {
  answerRevealed = true;
  highlightCorrectTrait(selectedTrait, selectedTraitValue);
}

// Show toast message
function showToast(message) {
  const existingToast = document.querySelector('.toast');
  if (existingToast) {
    existingToast.remove();
  }
  
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.textContent = message;
  document.body.appendChild(toast);
  
  toast.offsetHeight;
  toast.classList.add('show');
  
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => toast.remove(), 300);
  }, 2000);
}

// Setup help modal
function setupHelpModal() {
  elements.helpButton.addEventListener('click', (e) => {
    e.stopPropagation();
    elements.helpModal.classList.remove('hidden');
  });
  
  elements.helpModal.addEventListener('click', (e) => {
    if (e.target === elements.helpModal) {
      elements.helpModal.classList.add('hidden');
    }
  });
  
  const modalContent = elements.helpModal.querySelector('.bg-white');
  modalContent.addEventListener('click', (e) => {
    e.stopPropagation();
  });
  
  // Set up button event listeners
  elements.newGameButton.addEventListener('click', startNewGame);
  elements.showAnswerButton.addEventListener('click', revealAnswer);
}
</script>
</body>
</html>
